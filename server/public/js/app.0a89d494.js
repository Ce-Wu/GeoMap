(function(){"use strict";var e={2309:function(e,o,t){var r=t(9242),s=t(3396);function l(e,o){const t=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(t)}var a=t(89);const n={},c=(0,a.Z)(n,[["render",l]]);var i=c,u=t(678);const d={class:"h-screen relative"},p=(0,s._)("div",{id:"map",class:"h-full z-[1]"},null,-1);function m(e,o,t,r,l,a){const n=(0,s.up)("GeoErrorModal"),c=(0,s.up)("MapFeatures");return(0,s.wg)(),(0,s.iD)("div",d,[r.geoError?((0,s.wg)(),(0,s.j4)(n,{key:0,onCloseGeoError:r.closeGeoError,geoErrorMsg:r.geoErrorMsg},null,8,["onCloseGeoError","geoErrorMsg"])):(0,s.kq)("",!0),(0,s.Wm)(c,{onGetGeoLocation:r.getGeoLocation,coords:r.coords,fetchCoords:r.fetchCoords,onPlotResult:r.plotResult,searchResults:r.searchResults,onToggleSearchResults:r.toggleSearchResults,onRemoveResult:r.removeResult},null,8,["onGetGeoLocation","coords","fetchCoords","onPlotResult","searchResults","onToggleSearchResults","onRemoveResult"]),p])}var v=t(3153),f=t.n(v),g=t(4870),h=t(7139);const x={class:"h-screen absolute w-full z-10 flex justify-center items-start pt-[125px] bg-black/50"},w={class:"flex flex-col bg-white w-[80%] sm:w-[450px] px-6 py-4 rounded-md"},y={class:"text-lg mb-1"},b=(0,s._)("p",{class:"text-sm mb-4"}," Please be sure that location services in your browser are enabled ",-1);function k(e,o,t,r,l,a){return(0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("div",w,[(0,s._)("h1",y,"Error: "+(0,h.zw)(t.geoErrorMsg),1),b,(0,s._)("button",{onClick:o[0]||(o[0]=o=>e.$emit("closeGeoError")),class:"self-start py-2 px-4 bg-red-500 text-white rounded-md text-sm"},"Close")])])}var R={props:["geoErrorMsg"]};const _=(0,a.Z)(R,[["render",k]]);var M=_;const E={class:"w-full md:w-auto absolute md:top[40px] md:left-[60px] z-[2] flex gap-4 px-6 py-8 md:px-0 md:py-0 bg-transparent"},z={class:"relative flex-1 md:min-w-[350px]"},C=(0,s._)("div",{class:"absolute top-0 left-[8px] h-full flex items-center"},[(0,s._)("i",{class:"fa-solid fa-magnifying-glass"})],-1),G={class:"absolute mt-2 w-full"},O={key:0,class:"h-[200px] overflow-scroll bg-white rounded-md"},S={key:1},D=["onClick"],j=(0,s._)("i",{class:"fa-solid fa-location-dot"},null,-1),H={class:"text-xs"},I={key:1,class:"mt-2 px-4 py-3 bg-white rounded-md"},L={class:"text-lg"},T={class:"text-xs mb-1"},N={class:"text-xs"};function P(e,o,t,l,a,n){const c=(0,s.up)("LoadingData");return(0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("div",z,[(0,s.wy)((0,s._)("input",{class:"pl-9 pr-4 py-3 text-sm w-full shadow-md rounded-md",type:"text",placeholder:"Search your location","onUpdate:modelValue":o[0]||(o[0]=e=>l.searchQuery=e),onInput:o[1]||(o[1]=(...e)=>l.search&&l.search(...e)),onFocus:o[2]||(o[2]=o=>e.$emit("toggleSearchResults"))},null,544),[[r.nr,l.searchQuery]]),C,(0,s._)("div",G,[l.searchQuery&&t.searchResults?((0,s.wg)(),(0,s.iD)("div",O,[l.searchData?((0,s.wg)(),(0,s.iD)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.searchData,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{key:o,onClick:o=>l.selectResult(e),class:"px-4 py-2 flex gap-x-2 cursor-pointer hover:bg-black hover:text-white"},[j,(0,s._)("p",H,(0,h.zw)(e.place_name),1)],8,D)))),128))])):((0,s.wg)(),(0,s.j4)(c,{key:0}))])):(0,s.kq)("",!0),l.selectedResult?((0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("i",{onClick:o[3]||(o[3]=(...e)=>l.removeResult&&l.removeResult(...e)),class:"fa-solid fa-circle-xmark flex justify-end cursor-pointer"}),(0,s._)("h1",L,(0,h.zw)(l.selectedResult.text),1),(0,s._)("p",T,(0,h.zw)(l.selectedResult.place_name),1),(0,s._)("p",N,(0,h.zw)(l.selectedResult.properties.category),1)])):(0,s.kq)("",!0)])]),(0,s._)("div",{class:(0,h.C_)(["px-4 bg-white flex items-center shadow-md rounded-md min-h-[45px]",{"bg-slate-600":t.coords}]),onClick:o[4]||(o[4]=o=>e.$emit("getGeoLocation"))},[(0,s._)("i",{class:(0,h.C_)(["fa-solid fa-location-crosshairs text-state-600 text-[18px]",{"text-white":t.coords,"animate-pulse":t.fetchCoords}])},null,2)],2)])}var U=t(6265),Z=t.n(U);const V={class:"h-full w-full flex items-center justify-center"},$=(0,s._)("span",{class:"block w=[60px] h-[60px] border-[5px] border-solid border-transparent border-t-black rounded-full animate-spin"},null,-1),J=[$];function Q(e,o,t,r,l,a){return(0,s.wg)(),(0,s.iD)("div",V,J)}var Y={name:"loadingData"};const q=(0,a.Z)(Y,[["render",Q]]);var F=q,X={props:["coords","fetchCoords","searchResults"],components:{LoadingData:F},setup(e,{emit:o}){const t=(0,g.iH)(null),r=(0,g.iH)(null),s=(0,g.iH)(null),l=(0,g.iH)(null),a=()=>{clearTimeout(s.value),r.value=null,s.value=setTimeout((async()=>{if(""!==t.value){const o=new URLSearchParams({fuzzyMatch:!0,language:"pl",limit:10,proximity:e.coords?`${e.coords.lng},${e.coords.lat}`:"0,0"}),s=await Z().get(`api/search/${t.value}?${o}`);r.value=s.data.features}}),750)},n=e=>{l.value=e,o("plotResult",e.geometry)},c=()=>{l.value=null,o("removeResult")};return{removeResult:c,selectResult:n,selectedResult:l,searchQuery:t,searchData:r,queryTimeout:s,search:a}}};const K=(0,a.Z)(X,[["render",P]]);var A=K,B={name:"HomeView",components:{GeoErrorModal:M,MapFeatures:A},setup(){let e;(0,s.bv)((()=>{e=f().map("map").setView([52.214339,21.022339],13),f().tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic2t1Y3phZmlrcyIsImEiOiJjbDBuaXlxN3Ewamh0M2tudHU0aG1icGh6In0.XMNMzYQMl1kz5eKVkUNiAw",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1Ijoic2t1Y3phZmlrcyIsImEiOiJjbDBuaXlxN3Ewamh0M2tudHU0aG1icGh6In0.XMNMzYQMl1kz5eKVkUNiAw"}).addTo(e),e.on("moveend",(()=>{w()})),c()}));const o=(0,g.iH)(null),r=(0,g.iH)(null),l=(0,g.iH)(null),a=(0,g.iH)(null),n=(0,g.iH)(null),c=()=>o.value?(o.value=null,sessionStorage.removeItem("coords"),void e.removeLayer(l.value)):sessionStorage.getItem("coords")?(o.value=JSON.parse(sessionStorage.getItem("coords")),void d(o.value)):(r.value=!0,void navigator.geolocation.getCurrentPosition(i,u)),i=e=>{r.value=null;const t={lat:e.coords.latitude,lng:e.coords.longitude};sessionStorage.setItem("coords",JSON.stringify(t)),o.value=t,d(o.value)},u=e=>{r.value=null,a.value=!0,n.value=e.message},d=o=>{const r=f().icon({iconUrl:t(1121),iconSize:[60,60]});l.value=f().marker([o.lat,o.lng],{icon:r}).addTo(e),e.setView([o.lat,o.lng],10),w()},p=()=>{a.value=null,n.value=null},m=(0,g.iH)(null),v=o=>{m.value&&e.removeLayer(m.value);const r=f().icon({iconUrl:t(4954),iconSize:[60,60]});m.value=f().marker([o.coordinates[1],o.coordinates[0]],{icon:r}).addTo(e),e.setView([o.coordinates[1],o.coordinates[0]],14)},h=(0,g.iH)(null),x=()=>{h.value=!h.value},w=()=>{h.value=null},y=()=>{e.removeLayer(m.value)};return{getGeoLocation:c,coords:o,fetchCoords:r,geoMarker:l,closeGeoError:p,geoError:a,geoErrorMsg:n,plotResult:v,searchResults:h,toggleSearchResults:x,closeSearchResults:w,removeResult:y}}};const W=(0,a.Z)(B,[["render",m]]);var ee=W;const oe=[{path:"/",name:"home",component:ee}],te=(0,u.p7)({history:(0,u.PO)("/"),routes:oe});var re=te;(0,r.ri)(i).use(re).mount("#app")},4954:function(e,o,t){e.exports=t.p+"img/map_pin_blue.77d74fc7.svg"},1121:function(e,o,t){e.exports=t.p+"img/map_pin_red.05dcb65a.svg"}},o={};function t(r){var s=o[r];if(void 0!==s)return s.exports;var l=o[r]={exports:{}};return e[r].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(o,r,s,l){if(!r){var a=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],l=e[u][2];for(var n=!0,c=0;c<r.length;c++)(!1&l||a>=l)&&Object.keys(t.O).every((function(e){return t.O[e](r[c])}))?r.splice(c--,1):(n=!1,l<a&&(a=l));if(n){e.splice(u--,1);var i=s();void 0!==i&&(o=i)}}return o}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,s,l]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,r){var s,l,a=r[0],n=r[1],c=r[2],i=0;if(a.some((function(o){return 0!==e[o]}))){for(s in n)t.o(n,s)&&(t.m[s]=n[s]);if(c)var u=c(t)}for(o&&o(r);i<a.length;i++)l=a[i],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(2309)}));r=t.O(r)})();
//# sourceMappingURL=app.0a89d494.js.map